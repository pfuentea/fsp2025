<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alke Wallet</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/estilo.css">
</head>
<body>
    <div class="container">
        <div id="menu">
        </div>
        <h1> ALKE WALLET</h1>
        <h2>Send money</h2>   
        <div class="container">
            <div class="row">
                <div class="col">

                </div>
                <div class="col-5">
                    <div class="card" style="width: 18rem;">
                        <div class="card-body">
                            <h5 class="card-title">Saldo: <span id="saldo"> </span></h5>
                        </div>
                        <div class="d-flex">
                            <label for="contacto" class="form-label gap-2 m-1">Contacto:</label>
                            <input type="text" name="contacto" id="contacto" class="form-control w-auto">
                        </div>
                        <div class="d-flex">
                            <label for="contacto" class="form-label gap-2 m-1">Cuenta:</label>
                            <input type="text" name="cuenta" id="cuenta" class="form-control w-auto">
                        </div>
                        <div class="d-flex">
                            <label for="contacto" class="form-label gap-2 m-1">Monto:</label>
                            <input type="text" name="monto" id="monto" class="form-control w-auto">
                        </div>
                        <div id="MntError" class="d-none alert alert-danger">
                            El monto no puede superar al saldo. Intentelo de nuevo.
                        </div>
                        <div id="CntcError" class="d-none alert alert-danger">
                            El contacto no puede ser vacío.
                        </div>
                        <div id="CtaError" class="d-none alert alert-danger">
                            La cuenta no puede ser vacía.
                        </div>
                        <div class="card-body">
                            <button class="btn btn-outline-primary" id="enviar">Enviar</button>
                        </div>
                        </div>
                </div>
                <div class="col-1"></div>
                <div class="col-3">
                    <div class="container">
                        <div class="row">
                            <div class="col border rounded">Contactos</div>
                        </div>
                        <div id="ContactosLst" class="">
                            <div class="row m-auto">
                                <div class="col m-auto">
                                    <div class="row fw-bold">Juan Perez</div>
                                    <div class="row">24500-03</div>
                                </div>
                                <div class="col m-auto">
                                    <button class="btn btn-outline-danger">Eliminar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col"></div>
            </div>
        </div>

        <div id="footer">
        </div>
        
    </div>

    <script
    src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script src="assets/js/app.js">        
    </script>  
    <script src="assets/js/saldo.js">        
    </script> 
    <script>
        $(document).ready(function(){
            $('#saldo').text(getSaldo());

            $('#enviar').on('click',function(){
                const contacto=$('#contacto').val();
                const monto=parseInt($('#monto').val());
                const cuenta=$('#cuenta').val();

                let saldo=parseInt($('#saldo').text());

                // validar que los campos no vengan vacios y enviar mensaje en caso de error
                if(saldo-monto >=0){
                    // actualizar el saldo
                    saldo=saldo-monto;
                    
                    setSaldo(saldo);
                    $('#saldo').text(saldo);
                    //agregar contacto a la lista con su cuenta
                    
                    nuevoContacto=`<div class="row m-auto">
                                <div class="col m-auto">
                                    <div class="row fw-bold">${contacto}</div>
                                    <div class="row">${cuenta}</div>
                                </div>
                                <div class="col m-auto">
                                    <button class="btn btn-outline-danger">Eliminar</button>
                                </div>
                            </div>`;
                    $('#ContactosLst').append(nuevoContacto) ;  
                    $('#contacto').val("");
                    $('#monto').val("");
                    $('#cuenta').val("");
                } else{       
                    // mostrar mensaje de error en caso de que algo vaya mal             
                     $('#MntError').removeClass('d-none');
                }
            })
        })
    </script> 

 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>